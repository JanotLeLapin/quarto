<!doctype html>
<html lang="en-US">

<head>
  <meta charset="utf-8" />
  <title>quarto example</title>
  <link rel="stylesheet" href="quarto.css" />
</head>

<body>
  <script type="module">
    import init, {QuartoEngine} from "./pkg/quarto_wasm.js";

    let quarto

    init().then(() => {
      quarto = new QuartoEngine()
      console.log("initialized")
    });

    document.getElementById("next").addEventListener("click", (_) => {
      console.log("clicked")
      console.log(quarto.get_board())

      if (undefined != quarto.get_winner()) {
        console.log("winner: " + quarto.get_winner())
        return
      }

      let piece = quarto.give_piece()
      quarto.pick_piece(piece)
      console.log("will play " + piece)

      let [x, y] = quarto.play_piece(piece)
      quarto.place_piece(x, y, piece)
      console.log("at " + x + ", " + y)
    })
  </script>

  <div class="board">
    <div class="piece is-light is-square is-tall"></div>
    <div class="piece is-light is-square is-tall is-hollow"></div>
    <div class="piece is-light is-square is-short"></div>
    <div class="piece is-light is-square is-short is-hollow"></div>
    <div class="piece is-light is-circle is-tall"></div>
    <div class="piece is-light is-circle is-tall is-hollow"></div>
    <div class="piece is-light is-circle is-short"></div>
    <div class="piece is-light is-circle is-short is-hollow"></div>
    <div class="piece is-dark is-square is-tall"></div>
    <div class="piece is-dark is-square is-tall is-hollow"></div>
    <div class="piece is-dark is-square is-short"></div>
    <div class="piece is-dark is-square is-short is-hollow"></div>
    <div class="piece is-dark is-circle is-tall"></div>
    <div class="piece is-dark is-circle is-tall is-hollow"></div>
    <div class="piece is-dark is-circle is-short"></div>
    <div class="piece is-dark is-circle is-short is-hollow"></div>
  </div>

  <button id="next">Next</button>
</body>

</html>